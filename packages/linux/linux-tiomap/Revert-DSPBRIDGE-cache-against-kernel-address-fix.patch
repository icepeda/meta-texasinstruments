From 868548a3f8231a0b98584c64609583986c53c315 Mon Sep 17 00:00:00 2001
From: Xavier Boudet <x-boudet@ti.com>
Date: Tue, 23 Feb 2010 15:46:13 +0100
Subject: [PATCH] Revert "DSPBRIDGE: cache against kernel address fix"

This reverts commit 07880b3410ad19962d16ce1415f0423dfeed17da.
---
 drivers/dsp/bridge/rmgr/proc.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/dsp/bridge/rmgr/proc.c b/drivers/dsp/bridge/rmgr/proc.c
index 72c86df..4f179ac 100644
--- a/drivers/dsp/bridge/rmgr/proc.c
+++ b/drivers/dsp/bridge/rmgr/proc.c
@@ -585,11 +585,11 @@ static int memory_sync_page(struct vm_area_struct *vma, unsigned long start,
 		}
 
 		offset = start & ~PAGE_MASK;
-		kaddr = kmap(page) + offset;
+		kaddr = page_address(page) + offset;
 		rest = min_t(ssize_t, PAGE_SIZE - offset, len);
+
 		MEM_FlushCache(kaddr, rest, ftype);
 
-		kunmap(page);
 		put_page(page);
 		len -= rest;
 		start += rest;
-- 
1.6.0.4

